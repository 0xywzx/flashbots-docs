"use strict";(self.webpackChunkflashbot_docs=self.webpackChunkflashbot_docs||[]).push([[85],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var o=a.createContext({}),d=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,o=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=d(n),h=s,m=p["".concat(o,".").concat(h)]||p[h]||u[h]||r;return n?a.createElement(m,l(l({ref:t},c),{},{components:n})):a.createElement(m,l({ref:t},c))}));function h(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,l=new Array(r);l[0]=p;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:s,l[1]=i;for(var d=2;d<r;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8215:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294);const s=function({children:e,hidden:t,className:n}){return a.createElement("div",{role:"tabpanel",hidden:t,className:n},e)}},5064:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(7294),s=n(9443);const r=function(){const e=(0,a.useContext)(s.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e};var l=n(6010);const i="tabItem_1uMI",o="tabItemActive_2DSg";const d=function(e){var t;const{lazy:n,block:s,defaultValue:d,values:c,groupId:u,className:p}=e,h=a.Children.toArray(e.children),m=c??h.map((e=>({value:e.props.value,label:e.props.label}))),b=d??(null==(t=h.find((e=>e.props.default)))?void 0:t.props.value),{tabGroupChoices:f,setTabGroupChoices:g}=r(),[k,v]=(0,a.useState)(b),N=[];if(null!=u){const e=f[u];null!=e&&e!==k&&m.some((t=>t.value===e))&&v(e)}const y=e=>{const t=e.currentTarget,n=N.indexOf(t),a=m[n].value;v(a),null!=u&&(g(u,a),setTimeout((()=>{(function(e){const{top:t,left:n,bottom:a,right:s}=e.getBoundingClientRect(),{innerHeight:r,innerWidth:l}=window;return t>=0&&s<=l&&a<=r&&n>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(o),setTimeout((()=>t.classList.remove(o)),2e3))}),150))},w=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{const t=N.indexOf(e.target)+1;n=N[t]||N[0];break}case"ArrowLeft":{const t=N.indexOf(e.target)-1;n=N[t]||N[N.length-1];break}}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":s},p)},m.map((({value:e,label:t})=>a.createElement("li",{role:"tab",tabIndex:k===e?0:-1,"aria-selected":k===e,className:(0,l.Z)("tabs__item",i,{"tabs__item--active":k===e}),key:e,ref:e=>N.push(e),onKeyDown:w,onFocus:y,onClick:y},t??e)))),n?(0,a.cloneElement)(h.filter((e=>e.props.value===k))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},h.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==k})))))}},9443:(e,t,n)=>{n.d(t,{Z:()=>a});const a=(0,n(7294).createContext)(void 0)},6047:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>i,contentTitle:()=>o,metadata:()=>d,toc:()=>c,default:()=>p});var a=n(7462),s=(n(7294),n(3905)),r=n(5064),l=n(8215);const i={title:"RPC Endpoint"},o=void 0,d={unversionedId:"flashbots-auction/searchers/advanced/rpc-endpoint",id:"flashbots-auction/searchers/advanced/rpc-endpoint",isDocsHomePage:!1,title:"RPC Endpoint",description:"flashbotsgetUserStats and flashbotsgetBundleStats methods will be deprecated on March 31, 2023, use V2 methods!",source:"@site/docs/flashbots-auction/searchers/advanced/rpc-endpoint.mdx",sourceDirName:"flashbots-auction/searchers/advanced",slug:"/flashbots-auction/searchers/advanced/rpc-endpoint",permalink:"/flashbots-auction/searchers/advanced/rpc-endpoint",tags:[],version:"current",frontMatter:{title:"RPC Endpoint"},sidebar:"docs",previous:{title:"Bundle Pricing",permalink:"/flashbots-auction/searchers/advanced/bundle-pricing"},next:{title:"Searcher Reputation",permalink:"/flashbots-auction/searchers/advanced/reputation"}},c=[{value:"How to interact directly with the Flashbots RPC endpoint",id:"how-to-interact-directly-with-the-flashbots-rpc-endpoint",children:[{value:"eth_sendBundle",id:"eth_sendbundle",children:[]},{value:"eth_callBundle",id:"eth_callbundle",children:[]},{value:"eth_cancelBundle",id:"eth_cancelbundle",children:[]},{value:"eth_sendPrivateTransaction",id:"eth_sendprivatetransaction",children:[]},{value:"eth_cancelPrivateTransaction",id:"eth_cancelprivatetransaction",children:[]},{value:"flashbots_getUserStats",id:"flashbots_getuserstats",children:[]},{value:"flashbots_getBundleStats",id:"flashbots_getbundlestats",children:[]},{value:"flashbots_getUserStatsV2",id:"flashbots_getuserstatsv2",children:[]},{value:"flashbots_getBundleStatsV2",id:"flashbots_getbundlestatsv2",children:[]},{value:"API Response",id:"api-response",children:[]},{value:"Authentication",id:"authentication",children:[]}]}],u={toc:c};function p({components:e,...t}){return(0,s.kt)("wrapper",(0,a.Z)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,s.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"flashbots_getUserStats and flashbots_getBundleStats methods will be deprecated on March 31, 2023, use V2 methods!"))),(0,s.kt)("h2",{id:"how-to-interact-directly-with-the-flashbots-rpc-endpoint"},"How to interact directly with the Flashbots RPC endpoint"),(0,s.kt)("p",null,"Advanced users can interact with the RPC endpoint at ",(0,s.kt)("inlineCode",{parentName:"p"},"relay.flashbots.net"),". The API provides JSON-RPC methods for interfacing with Flashbots which are documented below:"),(0,s.kt)("h3",{id:"eth_sendbundle"},"eth_sendBundle"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"eth_sendBundle")," can be used to send your bundles to the Flashbots builder. The ",(0,s.kt)("inlineCode",{parentName:"p"},"eth_sendBundle")," RPC has the following payload format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendBundle",\n  "params": [\n    {\n      txs,               // Array[String], A list of signed transactions to execute in an atomic bundle\n      blockNumber,       // String, a hex encoded block number for which this bundle is valid on\n      minTimestamp,      // (Optional) Number, the minimum timestamp for which this bundle is valid, in seconds since the unix epoch\n      maxTimestamp,      // (Optional) Number, the maximum timestamp for which this bundle is valid, in seconds since the unix epoch\n      revertingTxHashes, // (Optional) Array[String], A list of tx hashes that are allowed to revert\n      replacementUuid,   // (Optional) String, UUID that can be used to cancel/replace this bundle\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendBundle",\n  "params": [\n    {\n      "txs": ["0x123abc...", "0x456def..."],\n      "blockNumber": "0xb63dcd",\n      "minTimestamp": 0,\n      "maxTimestamp": 1615920932\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "123",\n  "result": {\n    "bundleHash": "0x2228f5d8954ce31dc1601a8ba264dbd401bf1428388ce88238932815c5d6f23f"\n  }\n}\n')),(0,s.kt)("h3",{id:"eth_callbundle"},"eth_callBundle"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"eth_callBundle")," can be used to simulate a bundle against a specific block number, including simulating a bundle at the top of the next block. The ",(0,s.kt)("inlineCode",{parentName:"p"},"eth_callBundle")," RPC has the following payload format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_callBundle",\n  "params": [\n    {\n      txs,               // Array[String], A list of signed transactions to execute in an atomic bundle\n      blockNumber,       // String, a hex encoded block number for which this bundle is valid on\n      stateBlockNumber,  // String, either a hex encoded number or a block tag for which state to base this simulation on. Can use "latest"\n      timestamp,         // (Optional) Number, the timestamp to use for this bundle simulation, in seconds since the unix epoch\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_callBundle",\n  "params": [\n    {\n      "txs": ["0x123abc...", "0x456def..."],\n      "blockNumber": "0xb63dcd",\n      "stateBlockNumber": "latest",\n      "timestamp": 1615920932\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "123",\n  "result": {\n    "bundleGasPrice": "476190476193",\n    "bundleHash": "0x73b1e258c7a42fd0230b2fd05529c5d4b6fcb66c227783f8bece8aeacdd1db2e",\n    "coinbaseDiff": "20000000000126000",\n    "ethSentToCoinbase": "20000000000000000",\n    "gasFees": "126000",\n    "results": [\n      {\n        "coinbaseDiff": "10000000000063000",\n        "ethSentToCoinbase": "10000000000000000",\n        "fromAddress": "0x02A727155aeF8609c9f7F2179b2a1f560B39F5A0",\n        "gasFees": "63000",\n        "gasPrice": "476190476193",\n        "gasUsed": 21000,\n        "toAddress": "0x73625f59CAdc5009Cb458B751b3E7b6b48C06f2C",\n        "txHash": "0x669b4704a7d993a946cdd6e2f95233f308ce0c4649d2e04944e8299efcaa098a",\n        "value": "0x"\n      },\n      {\n        "coinbaseDiff": "10000000000063000",\n        "ethSentToCoinbase": "10000000000000000",\n        "fromAddress": "0x02A727155aeF8609c9f7F2179b2a1f560B39F5A0",\n        "gasFees": "63000",\n        "gasPrice": "476190476193",\n        "gasUsed": 21000,\n        "toAddress": "0x73625f59CAdc5009Cb458B751b3E7b6b48C06f2C",\n        "txHash": "0xa839ee83465657cac01adc1d50d96c1b586ed498120a84a64749c0034b4f19fa",\n        "value": "0x"\n      }\n    ],\n    "stateBlockNumber": 5221585,\n    "totalGasUsed": 42000\n  }\n}\n')),(0,s.kt)("h3",{id:"eth_cancelbundle"},"eth_cancelBundle"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"eth_cancelBundle")," is used to prevent a submitted bundle from being included on-chain.\nSee ",(0,s.kt)("a",{parentName:"p",href:"/flashbots-auction/searchers/advanced/bundle-cancellations"},"bundle cancellations")," for more information."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"\u2139\ufe0f ",(0,s.kt)("inlineCode",{parentName:"p"},"replacementUuid")," must have been set when bundle was submitted.")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_cancelBundle",\n  "params": [\n    {\n      replacementUuid, // UUIDv4 to uniquely identify submission\n    }\n  ]\n}\n')),(0,s.kt)("h3",{id:"eth_sendprivatetransaction"},"eth_sendPrivateTransaction"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"eth_sendPrivateTransaction")," is used to send a single transaction to Flashbots. Flashbots will attempt to build a block including the transaction for the next 25 blocks. See ",(0,s.kt)("a",{parentName:"p",href:"/flashbots-auction/searchers/advanced/private-transaction"},"Private Transactions")," for more info."),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://docs.alchemy.com/reference/eth-sendprivatetransaction?a=fb"},(0,s.kt)("inlineCode",{parentName:"a"},"eth_sendPrivateTransaction"))," is also supported for free on ",(0,s.kt)("a",{parentName:"p",href:"https://alchemy.com?a=fb"},"Alchemy"),"."),(0,s.kt)("p",null,"This method has the following JSON-RPC format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendPrivateTransaction",\n  "params": [{\n    tx,               // String, raw signed transaction\n    maxBlockNumber,   // Hex-encoded number string, optional. Highest block number in which the transaction should be included.\n    preferences: { fast: boolean } // optional. "fast" left for backwards compatibility; may be removed in a future version\n  }]\n}\n')),(0,s.kt)("p",null,"example request:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendPrivateTransaction",\n  "params": [\n    {\n      "tx": "0x123abc...",\n      "maxBlockNumber": "0xcd23a0",\n      "preferences": { "fast": true } // "fast" left for backwards compatibility; may be removed in a future version\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": "0x45df1bc3de765927b053ec029fc9d15d6321945b23cac0614eb0b5e61f3a2f2a" // tx hash\n}\n')),(0,s.kt)("h3",{id:"eth_cancelprivatetransaction"},"eth_cancelPrivateTransaction"),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"eth_cancelPrivateTransaction")," method stops private transactions from being submitted for future blocks. A transaction can only be cancelled if the request is signed by the same key as the ",(0,s.kt)("inlineCode",{parentName:"p"},"eth_sendPrivateTransaction")," call submitting the transaction in first place."),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://docs.alchemy.com/reference/eth-cancelprivatetransaction?a=fb"},(0,s.kt)("inlineCode",{parentName:"a"},"eth_cancelPrivateTransaction"))," is also supported for free on ",(0,s.kt)("a",{parentName:"p",href:"https://alchemy.com?a=fb"},"Alchemy"),"."),(0,s.kt)("p",null,"This method has the following JSON-RPC format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_cancelPrivateTransaction",\n  "params": [{\n    txHash,   // String, transaction hash of private tx to be cancelled\n  }]\n}\n')),(0,s.kt)("p",null,"example request:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_cancelPrivateTransaction",\n  "params": [\n    {\n      "txHash": "0x45df1bc3de765927b053ec029fc9d15d6321945b23cac0614eb0b5e61f3a2f2a"\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": true // true if tx successfully cancelled, false if not\n}\n')),(0,s.kt)("h3",{id:"flashbots_getuserstats"},"flashbots_getUserStats"),(0,s.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"flashbots_getUserStats will be deprecated soon, use ",(0,s.kt)("a",{parentName:"p",href:"/flashbots-auction/searchers/advanced/rpc-endpoint#flashbots_getuserstatsv2"},"flashbots_getUserStatsV2")))),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"flashbots_getUserStats")," JSON-RPC method returns a quick summary of how a searcher is performing in the Flashbots ecosystem, including their ",(0,s.kt)("a",{parentName:"p",href:"/flashbots-auction/searchers/advanced/reputation"},"reputation-based priority"),". It is currently updated once every hour and has the following payload format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "flashbots_getUserStats",\n  "params": [\n      blockNumber,       // String, a hex encoded recent block number, in order to prevent replay attacks. Must be within 20 blocks of the current chain tip.\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "is_high_priority": true,\n  "all_time_miner_payments": "1280749594841588639",\n  "all_time_gas_simulated": "30049470846",\n  "last_7d_miner_payments": "1280749594841588639",\n  "last_7d_gas_simulated": "30049470846",\n  "last_1d_miner_payments": "142305510537954293",\n  "last_1d_gas_simulated": "2731770076"\n}\n')),(0,s.kt)("p",null,"where"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"is_high_priority"),": boolean representing if this searcher has a high enough reputation to be in the high priority queue"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"all_time_miner_payments"),": the total amount paid to validators over all time"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"all_time_gas_simulated"),": the total amount of gas simulated across all bundles submitted to Flashbots. This is the actual gas used in simulations, not gas limit")),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Parameters with ",(0,s.kt)("inlineCode",{parentName:"p"},"miner")," in the name are retrofitted with Flashbots block builder data to maintain backwards compatibility. This nomenclature will be changed in a future release to accurately reflect PoS Ethereum architecture."))),(0,s.kt)("h3",{id:"flashbots_getbundlestats"},"flashbots_getBundleStats"),(0,s.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"flashbots_getBundleStats will be deprecated soon, use ",(0,s.kt)("a",{parentName:"p",href:"/flashbots-auction/searchers/advanced/rpc-endpoint#flashbots_getbundlestatsv2"},"flashbots_getBundleStatsV2")))),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"flashbots_getBundleStats")," JSON-RPC method returns stats for a single bundle. You must provide a blockNumber and the bundleHash, and the signing address must be the same as the one who submitted the bundle."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "flashbots_getBundleStats",\n  "params": [\n    {\n      bundleHash,       // String, returned by the flashbots api when calling eth_sendBundle\n      blockNumber,       // String, the block number the bundle was targeting (hex encoded)\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "isSimulated": true,\n  "isSentToMiners": true,\n  "isHighPriority": true,\n  "simulatedAt": "2021-08-06T21:36:06.317Z",\n  "submittedAt": "2021-08-06T21:36:06.250Z",\n  "sentToMinersAt": "2021-08-06T21:36:06.343Z",\n  "receivedAt": "2022-10-06T21:36:06.250Z", // Added for POS, will be included as part of V2\n  "consideredByBuildersAt": [\n        {\n            "pubkey": "0x81babeec8c9f2bb9c329fd8a3b176032fe0ab5f3b92a3f44d4575a231c7bd9c31d10b6328ef68ed1e8c02a3dbc8e80f9",\n            "timestamp": "2022-10-06T21:36:06.343Z"\n        },\n        {\n            "pubkey": "0x81beef03aafd3dd33ffd7deb337407142c80fea2690e5b3190cfc01bde5753f28982a7857c96172a75a234cb7bcb994f",\n            "timestamp": "2022-10-06T21:36:06.394Z"\n        },\n        {\n            "pubkey": "0xa1dead1e65f0a0eee7b5170223f20c8f0cbf122eac3324d61afbdb33a8885ff8cab2ef514ac2c7698ae0d6289ef27fc",\n            "timestamp": "2022-10-06T21:36:06.322Z"\n        }\n    ], // Added for POS, will be included as part of V2\n  "sealedByBuildersAt": [\n    {\n      "pubkey": "0x81beef03aafd3dd33ffd7deb337407142c80fea2690e5b3190cfc01bde5753f28982a7857c96172a75a234cb7bcb994f",\n            "timestamp": "2022-10-06T21:36:07.742Z"\n        }\n  ] // Added for POS, will be included as part of V2\n}\n')),(0,s.kt)("h3",{id:"flashbots_getuserstatsv2"},"flashbots_getUserStatsV2"),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"flashbots_getUserStatsV2")," JSON-RPC method returns a quick summary of how a searcher is performing in the Flashbots ecosystem, including their ",(0,s.kt)("a",{parentName:"p",href:"/flashbots-auction/searchers/advanced/reputation"},"reputation-based priority"),". It is currently updated once every hour and has the following payload format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "flashbots_getUserStatsV2",\n  "params": [\n    {\n      blockNumber       // String, a hex encoded recent block number, in order to prevent replay attacks. Must be within 20 blocks of the current chain tip.\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "isHighPriority": true,\n  "allTimeValidatorPayments": "1280749594841588639",\n  "allTimeGasSimulated": "30049470846",\n  "last7dValidatorPayments": "1280749594841588639",\n  "last7dGasSimulated": "30049470846",\n  "last1dValidatorPayments": "142305510537954293",\n  "last1dGasSimulated": "2731770076"\n}\n')),(0,s.kt)("p",null,"where"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"isHighPriority"),": boolean representing if this searcher has a high enough reputation to be in the high priority queue"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"allTimeValidatorPayments"),": the total amount paid to validators over all time"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"allTimeGasSimulated"),": the total amount of gas simulated across all bundles submitted to Flashbots. This is the actual gas used in simulations, not gas limit")),(0,s.kt)("h3",{id:"flashbots_getbundlestatsv2"},"flashbots_getBundleStatsV2"),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"flashbots_getBundleStatsV2")," JSON-RPC method returns stats for a single bundle. You must provide a blockNumber and the bundleHash, and the signing address must be the same as the one who submitted the bundle."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "flashbots_getBundleStatsV2",\n  "params": [\n    {\n      bundleHash,       // String, returned by the flashbots api when calling eth_sendBundle\n      blockNumber,       // String, the block number the bundle was targeting (hex encoded)\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "isHighPriority": true,\n  "isSimulated": true,\n  "simulatedAt": "2022-10-06T21:36:06.317Z",\n  "receivedAt": "2022-10-06T21:36:06.250Z",\n  "consideredByBuildersAt": [\n        {\n            "pubkey": "0x81babeec8c9f2bb9c329fd8a3b176032fe0ab5f3b92a3f44d4575a231c7bd9c31d10b6328ef68ed1e8c02a3dbc8e80f9",\n            "timestamp": "2022-10-06T21:36:06.343Z"\n        },\n        {\n            "pubkey": "0x81beef03aafd3dd33ffd7deb337407142c80fea2690e5b3190cfc01bde5753f28982a7857c96172a75a234cb7bcb994f",\n            "timestamp": "2022-10-06T21:36:06.394Z"\n        },\n        {\n            "pubkey": "0xa1dead1e65f0a0eee7b5170223f20c8f0cbf122eac3324d61afbdb33a8885ff8cab2ef514ac2c7698ae0d6289ef27fc",\n            "timestamp": "2022-10-06T21:36:06.322Z"\n        }\n    ],\n  "sealedByBuildersAt": [\n    {\n      "pubkey": "0x81beef03aafd3dd33ffd7deb337407142c80fea2690e5b3190cfc01bde5753f28982a7857c96172a75a234cb7bcb994f",\n            "timestamp": "2022-10-06T21:36:07.742Z"\n        }\n  ]\n}\n')),(0,s.kt)("p",null,"where"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"isHighPriority"),": boolean representing if this searcher has a high enough reputation to be in the high priority queue"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"isSimulated"),": boolean representing whether the bundle gets simulated. All other fields will be omitted except simulated field if API didn't receive bundle"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"simulatedAt"),": time at which the bundle gets simulated"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"receivedAt"),": time at which the bundle API received the bundle"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"consideredByBuildersAt"),": indicates time at which each builder selected the bundle to be included in the target block"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"sealedByBuildersAt"),": indicates time at which each builder sealed a block containing the bundle")),(0,s.kt)("h3",{id:"api-response"},"API Response"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"All method supports JSON-RPC standards for success response and not supported for error response(V2 methods are exceptions)."),(0,s.kt)("li",{parentName:"ul"},"V2 methods supports JSON-RPC standards for both success and error response.")),(0,s.kt)("h3",{id:"authentication"},"Authentication"),(0,s.kt)("p",null,"To authenticate your request, Flashbots endpoints require you to sign the payload and include the signed payload in the ",(0,s.kt)("inlineCode",{parentName:"p"},"X-Flashbots-Signature")," header of your request."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-curl"},'curl -X POST -H "Content-Type: application/json" -H "X-Flashbots-Signature: 0x1234:0xabcd" --data \'{"jsonrpc":"2.0","method":"eth_sendBundle","params":[{see above}],"id":1}\' https://relay.flashbots.net\n')),(0,s.kt)("p",null,"Any valid Ethereum key can be used to sign the payload. The Ethereum address associated with this key will be used by Flashbots to keep track of your requests over time and provide user statistics. You can change the key you use at any time."),(0,s.kt)("p",null,"The signature is calculated by taking the ",(0,s.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-191"},"EIP-191")," hash of the json body encoded as UTF-8 bytes. Here's an example using ethers.js:"),(0,s.kt)(r.Z,{defaultValue:"ethers.js",values:[{label:"ethers.js",value:"ethers.js"},{label:"web3.py",value:"web3.py"},{label:"go",value:"go"}],mdxType:"Tabs"},(0,s.kt)(l.Z,{value:"ethers.js",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts"},'import { Wallet, utils } from "ethers";\n\nconst privateKey = "0x1234";\nconst wallet = new Wallet(privateKey);\nconst body =\n  \'{"jsonrpc":"2.0","method":"eth_sendBundle","params":[{see above}],"id":1}\';\nconst signature = wallet.address + ":" + wallet.signMessage(utils.id(body));\n'))),(0,s.kt)(l.Z,{value:"web3.py",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-py"},'from web3 import Web3\nfrom eth_account import Account, messages\n\nbody = \'{"jsonrpc":"2.0","method":"eth_sendBundle","params":[{see above}],"id":1}\'\nmessage = messages.encode_defunct(text=Web3.keccak(text=body).hex())\nsignature = Account.from_key(private_key).address + \':\' + Account.sign_message(message, private_key).signature.hex()\n'))),(0,s.kt)(l.Z,{value:"go",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-go"},'body := `{"jsonrpc":"2.0","method":"eth_sendBundle","params":[{see above}],"id":1}`\nhashedBody := crypto.Keccak256Hash([]byte(body)).Hex()\nsig, err := crypto.Sign(accounts.TextHash([]byte(hashedBody)), privKey)\nsignature := crypto.PubkeyToAddress(privKey.PublicKey).Hex() + ":" + hexutil.Encode(sig)\n')))))}p.isMDXComponent=!0},6010:(e,t,n)=>{function a(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function s(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(s&&(s+=" "),s+=t);return s}n.d(t,{Z:()=>s})}}]);