"use strict";(self.webpackChunkflashbot_docs=self.webpackChunkflashbot_docs||[]).push([[1687],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var r=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,l=function(e,t){if(null==e)return{};var a,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=r.createContext({}),d=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):n(n({},t),e)),a},c=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=d(a),u=l,m=p["".concat(s,".").concat(u)]||p[u]||b[u]||o;return a?r.createElement(m,n(n({ref:t},c),{},{components:a})):r.createElement(m,n({ref:t},c))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,n=new Array(o);n[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:l,n[1]=i;for(var d=2;d<o;d++)n[d]=a[d];return r.createElement.apply(null,n)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4315:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>n,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var r=a(7462),l=(a(7294),a(3905));const o={title:"Block Builders"},n=void 0,i={unversionedId:"flashbots-mev-boost/block-builders",id:"flashbots-mev-boost/block-builders",isDocsHomePage:!1,title:"Block Builders",description:"What is a Builder?",source:"@site/docs/flashbots-mev-boost/block-builders.md",sourceDirName:"flashbots-mev-boost",slug:"/flashbots-mev-boost/block-builders",permalink:"/flashbots-mev-boost/block-builders",tags:[],version:"current",frontMatter:{title:"Block Builders"},sidebar:"docs",previous:{title:"MEV-Boost Risks and Considerations",permalink:"/flashbots-mev-boost/architecture-overview/risks"},next:{title:"Block Proposers",permalink:"/flashbots-mev-boost/block-proposers"}},s=[{value:"How do builders pay block proposers?",id:"how-do-builders-pay-block-proposers",children:[]},{value:"Determining the value of blocks",id:"determining-the-value-of-blocks",children:[]},{value:"Block level scoring",id:"block-level-scoring",children:[]},{value:"External Builders",id:"external-builders",children:[{value:"Relay Block Submission Endpoints by Network",id:"relay-block-submission-endpoints-by-network",children:[]},{value:"<strong>Rate-limits:</strong>",id:"rate-limits",children:[]}]},{value:"Flashbots Builders",id:"flashbots-builders",children:[]},{value:"Additional Links &amp; References",id:"additional-links--references",children:[]}],d={toc:s};function c(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"What is a Builder?")),(0,l.kt)("p",null,"Block builders are highly specialized actors who construct blocks from transaction orderflow (public transactions, bundles, private transactions, etc)."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"The Role of Builders")),(0,l.kt)("p",null,"Builders run algorithms and simulations (e.g. First Come First Serve, First Price Auctions, etc.) to order bundles and TXs in a block template (technically:\xa0",(0,l.kt)("inlineCode",{parentName:"p"},"execution payload"),") that maximizes profit. Builders then bid for and buy the validators\u2019 blockspace, facilitated by one or more relays, so their execution payloads are proposed to the blockchain."),(0,l.kt)("h3",{id:"how-do-builders-pay-block-proposers"},"How do builders pay block proposers?"),(0,l.kt)("p",null,"Flashbots proposed a standardized specification for how payments are made from builders to block proposers through the following process:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"The builder sets their own address as the ",(0,l.kt)("inlineCode",{parentName:"li"},"feeRecipient")," of the payload block header they are constructing. "),(0,l.kt)("li",{parentName:"ol"},"The builder includes a transaction which pays ETH to the proposer\u2019s ",(0,l.kt)("inlineCode",{parentName:"li"},"feeRecipient")," address at the end of their proposed block.")),(0,l.kt)("h3",{id:"determining-the-value-of-blocks"},"Determining the value of blocks"),(0,l.kt)("p",null,"A standard method for determining block value is crucial for multiple components of the MEV-Boost ecosystem; including relay monitoring, validator accounting, builder payments, block explorers, payment proofs, and MEV hiding. "),(0,l.kt)("p",null,"Various methods for defining block value were ",(0,l.kt)("a",{parentName:"p",href:"https://collective.flashbots.net/t/block-scoring-for-mev-boost-relays/202"},"considered")," by members of the community. It was determined that block level scoring was the most simple and intuitive method for scoring block value."),(0,l.kt)("h3",{id:"block-level-scoring"},"Block level scoring"),(0,l.kt)("p",null,"Block level scoring looks at the difference in the balance of the fee recipient account before and after the block execution.  "),(0,l.kt)("p",null,"Note that a \u201cblock score\u201d is not meant to be a formal definition of realized extractable value, since this is a difficult metric to quantify. For example, a Layer 2 transfer to a validator\u2019 fee recipient address could be considered extractable value, but falls outside the scope of a block score calculation. "),(0,l.kt)("p",null,"Constructing a payment proof for this scoring method requires a Merkle Proof of the fee recipient balance in block ",(0,l.kt)("em",{parentName:"p"},"(n - 1)"),", and a Merkle Proof of the fee recipient balance in block ",(0,l.kt)("em",{parentName:"p"},"n"),". ",(0,l.kt)("strong",{parentName:"p"},"Payment proofs have not yet been put into production.")," Active discussion about payment proof implementation is still on-going. For more details or to participate in the discussion around payment proofs and block-level scoring, please check out to the ",(0,l.kt)("a",{parentName:"p",href:"https://collective.flashbots.net/t/block-scoring-for-mev-boost-relays/202"},"block scoring")," forum thread."),(0,l.kt)("h2",{id:"external-builders"},"External Builders"),(0,l.kt)("p",null,"External builders can submit blocks to Mainnet, Goerli and Sepolia Flashbots relays. The table below outlines Builder API methods available on each network."),(0,l.kt)("h3",{id:"relay-block-submission-endpoints-by-network"},"Relay Block Submission Endpoints by Network"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null},"Mainnet"),(0,l.kt)("th",{parentName:"tr",align:null},"Goerli"),(0,l.kt)("th",{parentName:"tr",align:null},"Sepolia"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"getValidators")),(0,l.kt)("td",{parentName:"tr",align:null},"GET Request - Returns an array of validator registrations with assigned duties in the current and next epoch"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://boost-relay.flashbots.net/relay/v1/builder/validators"},"https://boost-relay.flashbots.net/relay/v1/builder/validators"),"\xa0"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://builder-relay-goerli.flashbots.net/relay/v1/builder/validators"},"https://builder-relay-goerli.flashbots.net/relay/v1/builder/validators"),"\xa0"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/validators"},"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/validators"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"submitBlock")),(0,l.kt)("td",{parentName:"tr",align:null},"POST Request - submits a block to the builder"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://boost-relay.flashbots.net/relay/v1/builder/blocks"},"https://boost-relay.flashbots.net/relay/v1/builder/blocks"),"\xa0"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://builder-relay-goerli.flashbots.net/relay/v1/builder/blocks"},"https://builder-relay-goerli.flashbots.net/relay/v1/builder/blocks")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/blocks"},"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/blocks"),"\xa0")))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"See also the ",(0,l.kt)("a",{parentName:"li",href:"https://bit.ly/3BmGZ3T"},"Relay API documentation - Block Builder API")," for more details on the API and payloads."),(0,l.kt)("li",{parentName:"ul"},"The example ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/flashbots/boost-geth-builder"},"Flashbots builder implementation")," is a good external builder reference, and is currently used in production by several builders.")),(0,l.kt)("h3",{id:"rate-limits"},(0,l.kt)("strong",{parentName:"h3"},"Rate-limits:")),(0,l.kt)("p",null,"Submissions to all relays are currently rate-limited to 60 blocks / minute."),(0,l.kt)("h2",{id:"flashbots-builders"},"Flashbots Builders"),(0,l.kt)("p",null,"All Flashbots builders pay block proposers from the\xa0",(0,l.kt)("a",{parentName:"p",href:"https://etherscan.io/address/0xdafea492d9c6733ae3d56b7ed1adb60692c98bc5"},(0,l.kt)("inlineCode",{parentName:"a"},"flashbots-builder.eth")," ENS address"),". Each Flashbots builder uses a different public key (",(0,l.kt)("inlineCode",{parentName:"p"},"builder_pubkey"),") for relay identification and analytics purposes. "),(0,l.kt)("p",null,"The various\xa0",(0,l.kt)("inlineCode",{parentName:"p"},"builder_pubkeys")," used to identify Flashbots builders to relays are listed below:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"th"},"Builder 'Name'")),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"th"},"Builder Public Key")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"babe")),(0,l.kt)("td",{parentName:"tr",align:null},"0x81",(0,l.kt)("strong",{parentName:"td"},"babe"),"ec8c9f2bb9c329fd8a3b176032fe0ab5f3b92a3f44d4575a231c7bd9c31d10b6328ef68ed1e8c02a3dbc8e80f9")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"beef")),(0,l.kt)("td",{parentName:"tr",align:null},"0x81",(0,l.kt)("strong",{parentName:"td"},"beef"),"03aafd3dd33ffd7deb337407142c80fea2690e5b3190cfc01bde5753f28982a7857c96172a75a234cb7bcb994f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"dead")),(0,l.kt)("td",{parentName:"tr",align:null},"0xa1",(0,l.kt)("strong",{parentName:"td"},"dead"),"1e65f0a0eee7b5170223f20c8f0cbf122eac3324d61afbdb33a8885ff8cab2ef514ac2c7698ae0d6289ef27fc")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"defa")," ",(0,l.kt)("em",{parentName:"td"},"(mempool builder)")),(0,l.kt)("td",{parentName:"tr",align:null},"0xa1",(0,l.kt)("strong",{parentName:"td"},"defa"),"73d675983a6972e8686360022c1ebc73395067dd1908f7ac76a526a19ac75e4f03ccab6788c54fdb81ff84fc1b")))),(0,l.kt)("h2",{id:"additional-links--references"},"Additional Links & References"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/flashbots/boost-geth-builder"},"MEV-Boost Geth Builder"),"\xa0- an example builder implementation"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://bit.ly/3BmGZ3T"},"Relay API documentation - Block Builder API")),(0,l.kt)("li",{parentName:"ul"},"Block Builder Self-Help Group:\xa0",(0,l.kt)("a",{parentName:"li",href:"https://collective.flashbots.net/c/builders/14"},"https://collective.flashbots.net/c/builders/14")),(0,l.kt)("li",{parentName:"ul"},"Github issue about becoming block builder:\xa0",(0,l.kt)("a",{parentName:"li",href:"https://github.com/flashbots/mev-boost/issues/145"},"https://github.com/flashbots/mev-boost/issues/145"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.mevboost.org/"},"Mevboost.org*")," - Tracking MEV-Boost relays and block builders. A quick hack by ",(0,l.kt)("a",{parentName:"li",href:"https://anishagnihotri.com/"},"Anish"),". Design inspired by file.app.")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Note: Flashbots does not control and cannot verify the data coming from external people and organizations. Please direct questions or issues directly to the creators of external data sources.")))}c.isMDXComponent=!0}}]);