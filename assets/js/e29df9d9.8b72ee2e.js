"use strict";(self.webpackChunkflashbot_docs=self.webpackChunkflashbot_docs||[]).push([[9401],{3905:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return h}});var a=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(r),h=o,b=c["".concat(l,".").concat(h)]||c[h]||u[h]||n;return r?a.createElement(b,s(s({ref:t},d),{},{components:r})):a.createElement(b,s({ref:t},d))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,s=new Array(n);s[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<n;p++)s[p]=r[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},1858:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return d},default:function(){return c}});var a=r(7462),o=r(3366),n=(r(7294),r(3905)),s=["components"],i={},l=void 0,p={unversionedId:"flashbots-mev-boost/block builders",id:"flashbots-mev-boost/block builders",isDocsHomePage:!1,title:"block builders",description:"Block Builders",source:"@site/docs/flashbots-mev-boost/block builders.md",sourceDirName:"flashbots-mev-boost",slug:"/flashbots-mev-boost/block builders",permalink:"/flashbots-mev-boost/block builders",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"risks",permalink:"/flashbots-mev-boost/architecture-overview/risks"},next:{title:"block proposers",permalink:"/flashbots-mev-boost/block proposers"}},d=[{value:"Block Builders",id:"block-builders",children:[{value:"Builder Fundamentals",id:"builder-fundamentals",children:[]}]},{value:"How do builders pay block proposers?",id:"how-do-builders-pay-block-proposers",children:[{value:"Framing the problem",id:"framing-the-problem",children:[]},{value:"Further considerations",id:"further-considerations",children:[]},{value:"Seeking Feedback",id:"seeking-feedback",children:[]}]}],u={toc:d};function c(e){var t=e.components,r=(0,o.Z)(e,s);return(0,n.kt)("wrapper",(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"block-builders"},"Block Builders"),(0,n.kt)("h3",{id:"builder-fundamentals"},"Builder Fundamentals"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"What is a Builder?")),(0,n.kt)("p",null,"Block builders are highly specialized actors who aggregate and construct blocks from transaction orderflow (bundles, private transactions, etc). "),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"The Role of Builders")),(0,n.kt)("p",null,"Builders run algorithms and simulations (e.g. First Come First Serve, First Price Auctions, etc.) to order bundles and TXs in a block template (technically:\xa0",(0,n.kt)("em",{parentName:"p"},"execution payload"),") that maximizes profit. They then bid for and buy the validators\u2019 blockspace, with the help of one or more relays, so their execution payloads are proposed to the blockchain. "),(0,n.kt)("h1",{id:"builder-quickstart"},"Builder Quickstart"),(0,n.kt)("p",null,"External builders can submit blocks to Goerli, Sepolia, and Mainnet Flashbots relays."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Mainnet relay block submission endpoints:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"getValidators"),":\xa0",(0,n.kt)("a",{parentName:"li",href:"https://boost-relay.flashbots.net/relay/v1/builder/validators"},"https://boost-relay.flashbots.net/relay/v1/builder/validators"),"\xa0(GET) - array of proposer preferences for registered validators with assigned duties in the current and next epoch"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"submitBlock"),":\xa0",(0,n.kt)("a",{parentName:"li",href:"https://boost-relay.flashbots.net/relay/v1/builder/blocks"},"https://boost-relay.flashbots.net/relay/v1/builder/blocks"),"\xa0(POST)")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Goerli relay block submission endpoints:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"getValidators"),":\xa0",(0,n.kt)("a",{parentName:"li",href:"https://builder-relay-goerli.flashbots.net/relay/v1/builder/validators"},"https://builder-relay-goerli.flashbots.net/relay/v1/builder/validators"),"\xa0(GET) - array of proposer preferences for registered validators with assigned duties in the current and next epoch"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"submitBlock"),":\xa0",(0,n.kt)("a",{parentName:"li",href:"https://builder-relay-goerli.flashbots.net/relay/v1/builder/blocks"},"https://builder-relay-goerli.flashbots.net/relay/v1/builder/blocks"),"\xa0(POST)")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Sepolia relay block submission endpoints:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"getValidators"),":\xa0",(0,n.kt)("a",{parentName:"li",href:"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/validators"},"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/validators"),"\xa0(GET) - array of proposer preferences for registered validators with assigned duties in the current and next epoch"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"submitBlock"),":\xa0",(0,n.kt)("a",{parentName:"li",href:"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/blocks"},"https://builder-relay-sepolia.flashbots.net/relay/v1/builder/blocks"),"\xa0(POST)")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Rate-limits:")," "),(0,n.kt)("p",null,"Submissions to all relays are currently rate-limited to 60 / minute."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"See also:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://bit.ly/3BmGZ3T"},"Relay API documentation - Block Builder API")),(0,n.kt)("li",{parentName:"ul"},"Block Builder Self-Help Group: ",(0,n.kt)("a",{parentName:"li",href:"https://collective.flashbots.net/c/builders/14"},"https://collective.flashbots.net/c/builders/14")),(0,n.kt)("li",{parentName:"ul"},"Github issue about becoming block builder: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/flashbots/mev-boost/issues/145"},"https://github.com/flashbots/mev-boost/issues/145")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/flashbots/boost-geth-builder"},"https://github.com/flashbots/boost-geth-builder")," - an example builder implementation"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/flashbots/boost-geth-builder"},"MEV-Boost Geth Builder")," is a testnet-ready open-source builder reference implementation (not meant for production). ")),(0,n.kt)("h2",{id:"how-do-builders-pay-block-proposers"},"How do builders pay block proposers?"),(0,n.kt)("p",null,"As outlined in the original ",(0,n.kt)("a",{parentName:"p",href:"https://ethresear.ch/t/mev-boost-merge-ready-flashbots-architecture/11177/4"},"MEV-boost architecture proposal,")," builders construct execution payloads that contain transactions and header parameters provided by validators. Builders may directly set the validator\u2019s\xa0",(0,n.kt)("inlineCode",{parentName:"p"},"feeRecipient")," address as the coinbase address of the payload, which transfers all gas fees and reward payments directly to the block proposer, ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"or"))," builders may set their own address and include a transaction to the block proposer\u2019s\xa0",(0,n.kt)("inlineCode",{parentName:"p"},"feeRecipient"),"\xa0address at the end of the block. While this design has not changed since the initial spec of MEV-boost, builders had not implemented this feature and an industry standard has yet to be defined."),(0,n.kt)("p",null,"In this article, we outline our preferred solution for builders to make payments to proposers, and provide a release update for payments in the Flashbots reference ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/flashbots/boost-geth-builder"},"boost-geth-builder")," for further testing."),(0,n.kt)("h3",{id:"framing-the-problem"},"Framing the problem"),(0,n.kt)("p",null,"In the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/flashbots/mev-boost/issues/220"},"Identifier for builder to proposer transaction #220 issue"),", staking providers and node operators outlined a need for an accounting mechanism for MEV payments. This mechanism unlocks a number of necessary operations, such as proving receipt of MEV rewards, fair distribution of rewards to staking customers, and preventing malicious activities, such as ",(0,n.kt)("a",{parentName:"p",href:"https://dao.rocketpool.net/t/mev-and-penalty-system/772"},"MEV hiding"),", among others."),(0,n.kt)("p",null,"To enable these operations, Flashbots proposes a standardized specification for how payments are made from builders to block proposers through the following process:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"The builder sets their own address as ",(0,n.kt)("inlineCode",{parentName:"li"},"feeRecipient")," of the payload header they are constructing."),(0,n.kt)("li",{parentName:"ol"},"The builder includes a transaction which pays ETH to the proposer\u2019s ",(0,n.kt)("inlineCode",{parentName:"li"},"feeRecipient")," address at the end of their proposed block. ")),(0,n.kt)("h3",{id:"further-considerations"},"Further considerations"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Withdrawals")),(0,n.kt)("p",null,"Validators need to be able to withdraw from the account which receives payment. If payments are made directly to a validator\u2019s recipient account, then the validator would be unable to withdraw anything from that account without adversely affecting the simulated value of that block. The reason is that if the profit of a block is measured by the difference in a validator\u2019s recipient account before and after that block, then a withdraw makes the block look less profitable because it removes assets. To prevent this, validators would need to create a new recipient account for each block they produce."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Out of band bribes")),(0,n.kt)("p",null,"Additional payment methods using transfers to the validator account, or transfers to the validator on L2s, for example, would allow for validator bribery. Further research and input is needed to address this externality."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Gas usage")),(0,n.kt)("p",null,"Adding a transaction that calls a smart contract costs additional gas, and becomes an overhead expense on every block."),(0,n.kt)("h3",{id:"seeking-feedback"},"Seeking Feedback"),(0,n.kt)("p",null,"We are actively seeking input from node operators and the broader community on implications of this proposed design. We are prepared to move forward with this implementation and continue to iterate as community input is received. "),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Please provide comments, feedback, or suggest alternatives directly on this forum thread: ",(0,n.kt)("a",{parentName:"strong",href:"https://collective.flashbots.net/t/block-scoring-for-mev-boost-relays/202/5"},"https://collective.flashbots.net/t/block-scoring-for-mev-boost-relays/202/5"))))}c.isMDXComponent=!0}}]);